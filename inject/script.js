(()=>{var j=Object.create;var A=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var T=Object.getPrototypeOf,z=Object.prototype.hasOwnProperty;var q=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var I=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of S(t))!z.call(i,n)&&n!==e&&A(i,n,{get:()=>t[n],enumerable:!(s=D(t,n))||s.enumerable});return i};var P=(i,t,e)=>(e=i!=null?j(T(i)):{},I(t||!i||!i.__esModule?A(e,"default",{value:i,enumerable:!0}):e,i));var L=q((H,X)=>{var w=class{constructor(){this.listeners=new Map}on(t,e){let s=this.listeners.get(t);Array.isArray(s)?s.push(e):this.listeners.set(t,[e])}off(t,e){let s=this.listeners.get(t);if(!Array.isArray(s))return;let n=s.indexOf(e);n!==-1&&s.splice(n,1)}emit(t,...e){if(!this.listeners.has(t))return;this.listeners.get(t).forEach(n=>n(...e))}};X.exports=w});var m=document.createElement("div");m.setAttribute("id","inject-overlay");var y=document.createElement("span");y.setAttribute("id","design-mode-decal");y.innerText="Design Mode";var g=document.createElement("div");g.setAttribute("id","tools");g.classList.add("flex-column");var f=document.createElement("div");f.classList.add("title");f.innerText="Required elements";var C=document.createElement("ul");C.setAttribute("id","elements");var p=document.createElement("button");p.setAttribute("id","done");p.setAttribute("disabled",!0);p.innerText="DONE";g.append(f,C,p);m.append(y,g);document.body.append(m);var Y=P(L()),b=class extends Y.default{constructor(t){super();let e;if(this.attached=!1,this.type="region",this.data=new Proxy({},{set:(s,n,r)=>(s[n]=r,e&&clearTimeout(e),e=setTimeout(()=>{this.emit("dataChanged")},10),!0)}),this.containerEl=document.createElement("div"),this.containerEl.classList.add("inject-action"),this.contentEl=document.createElement("div"),this.contentEl.style.position="relative",this.regionEl=document.createElement("div"),this.regionEl.classList.add(this.type),this.resizeEl=document.createElement("div"),this.resizeEl.classList.add("resize"),this.titleEl=document.createElement("p"),this.titleEl.classList.add("title"),this.contentEl.appendChild(this.resizeEl),this.containerEl.append(this.contentEl,this.titleEl),typeof t=="object"){if(!["name","x","y","width","height"].every(u=>u in t))throw new Error("missing parameters while creating new region");let{name:r,x:o,y:a,width:c,height:d}=t;this.data=Object.assign(this.data,{x:o,y:a,width:c,height:d}),this.regionEl.style.width=`${c}px`,this.regionEl.style.height=`${d}px`,this.name=r,this.setup()}else this.setupCreationMode()}setupCreationMode(){let t,e;this.isMouseDown=!1;let s=o=>{this.isMouseDown=!0,t=o.pageX,e=o.pageY,this.regionEl.style.left=`${t}px`,this.regionEl.style.top=`${e}px`,document.body.appendChild(this.regionEl)},n=o=>{if(!this.isMouseDown)return;let a=o.pageX<t,c=o.pageY<e,d=Math.abs(o.pageX-t),u=Math.abs(o.pageY-e);this.regionEl.style.left=`${a?o.pageX:t}px`,this.regionEl.style.top=`${c?o.pageY:e}px`,this.regionEl.style.width=`${d}px`,this.regionEl.style.height=`${u}px`},r=()=>{if(!this.isMouseDown)return;this.isMouseDown=!1;let{x:o,y:a,width:c,height:d}=this.regionEl.getBoundingClientRect();o+=window.scrollX,a+=window.scrollY,this.data=Object.assign(this.data,{x:o,y:a,width:c,height:d}),this.regionEl.style.position="",this.regionEl.style.left="",this.regionEl.style.top="",this.detach(),this.setup()};this.events=[{name:"pointerdown",handler:s},{name:"pointermove",handler:n},{name:"pointerup",handler:r}],this.regionEl.style.position="absolute"}set name(t){this.titleEl.innerText=t}remove(){document.body.contains(this.containerEl)&&document.body.removeChild(this.containerEl),document.body.contains(this.regionEl)&&document.body.removeChild(this.regionEl)}attach(){this.attached||(document.body.style.cursor="crosshair",this.events.forEach(t=>document.body.addEventListener(t.name,t.handler)),this.attached=!0)}detach(){!this.attached||(document.body.style.cursor="",this.events.forEach(t=>document.body.removeEventListener(t.name,t.handler)),this.attached=!1)}setup(){this.contentEl.insertBefore(this.regionEl,this.resizeEl),document.body.appendChild(this.containerEl),requestAnimationFrame(()=>{let{x:t,y:e}=this.containerEl.getBoundingClientRect(),{x:s,y:n}=this.regionEl.getBoundingClientRect(),r=this.data.x-(s-t),o=this.data.y-(n-e);this.containerEl.style.left=`${r}px`,this.containerEl.style.top=`${o}px`}),this.moveable(),this.resizable(),this.emit("created")}moveable(){let t=!1,e,s;this.regionEl.style.cursor="move",this.regionEl.addEventListener("pointerdown",n=>{n.button===0&&(t=!0,this.titleEl.style.visibility="hidden",{offsetX:e,offsetY:s}=n)}),document.body.addEventListener("pointermove",n=>{if(!t)return;let{x:r,y:o}=this.containerEl.getBoundingClientRect(),{x:a,y:c}=this.regionEl.getBoundingClientRect(),d=n.pageX-(a-r+e),u=n.pageY-(c-o+s);this.containerEl.style.left=`${d}px`,this.containerEl.style.top=`${u}px`}),document.body.addEventListener("pointerup",n=>{if(!t)return;let{x:r,y:o}=this.regionEl.getBoundingClientRect();r+=window.scrollX,o+=window.scrollY,this.data=Object.assign(this.data,{x:r,y:o}),this.titleEl.style.visibility="",t=!1})}resizable(){let t=!1;this.resizeEl.addEventListener("pointerdown",e=>{if(e.button!==0)return;e.stopPropagation(),t=!0;let{left:s,top:n}=this.regionEl.getBoundingClientRect();s+=window.scrollX,n+=window.scrollY,this.titleEl.style.visibility="hidden",this.containerEl.style.alignItems="flex-start",this.containerEl.style.left=`${s}px`,this.containerEl.style.top=`${n}px`}),document.body.addEventListener("pointermove",e=>{if(!t)return;let{left:s,top:n}=this.regionEl.getBoundingClientRect();s+=window.scrollX,n+=window.scrollY,this.regionEl.style.width=`${e.pageX-s}px`,this.regionEl.style.height=`${e.pageY-n}px`}),document.body.addEventListener("pointerup",()=>{if(!t)return;let{x:e,y:s,width:n,height:r}=this.regionEl.getBoundingClientRect();e+=window.scrollX,s+=window.scrollY,this.data=Object.assign(this.data,{x:e,y:s,width:n,height:r}),this.titleEl.style.visibility="",this.containerEl.style.alignItems="";let{x:o,y:a}=this.containerEl.getBoundingClientRect(),{x:c,y:d}=this.regionEl.getBoundingClientRect(),u=this.data.x-(c-o),O=this.data.y-(d-a);this.containerEl.style.left=`${u}px`,this.containerEl.style.top=`${O}px`,t=!1})}},v=b;var l=null,x=document.querySelector("#done");x.addEventListener("click",()=>{window.designReady=!0});var R=["balance","betAmount","play","double","clear","odd"],h=new Proxy({},{set(i,t,e){return i[t]=e,E(),B(),$(),!0},deleteProperty(i,t){return t in i?(i[t].remove(),delete i[t],E(),B(),$(),!0):!1}});k();$();window.addEventListener("keydown",i=>{i.key==="Escape"&&l&&M()});function k(){try{let i=localStorage.getItem("actions");if(!i)return;let t=JSON.parse(i);Object.keys(t).forEach(e=>{let{x:s,y:n,width:r,height:o}=t[e],a=new v({name:e,x:s,y:n,width:r,height:o});a.on("dataChanged",E),h[e]=a})}catch{alert("stored actions are corrupted"),localStorage.removeItem("actions")}}function $(){document.querySelector("#elements").innerHTML=R.map(i=>`
      <li class="flex space-between" style="color: ${i in h?"green":"red"}">
        <span>${i}</span>
        <div>
          <button onclick="setAction(event, '${i}')">SET</button>
          <button onclick="clearAction('${i}')")>X</button>
        </div>
      </li>`).join("")}function E(){let i=Object.fromEntries(Object.entries(h).map(([t,e])=>[t,e.data]));localStorage.setItem("actions",JSON.stringify(i))}function B(){R.every(t=>t in h)?x.removeAttribute("disabled"):x.setAttribute("disabled",!0)}function M(){l&&(l.detach(),l.remove(),l.targetEl.classList.remove("active"),l=null)}window.setAction=function(i,t){M(),l=new v,l.attach(),l.on("dataChanged",E),l.on("created",()=>{h[t]&&delete h[t],l.name=t,h[t]=l,l=null,i.target.classList.remove("active")}),i.target.classList.add("active"),l.targetEl=i.target,i.stopPropagation()};window.clearAction=function(i){delete h[i]};})();
